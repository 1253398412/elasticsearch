[[query-dsl-span-not-query]]
=== Span not query
++++
<titleabbrev>Span not</titleabbrev>
++++


Returns documents matching an `include` <<span-queries,span query>> while
removing overlapping matches from an `exclude` span query.


[[span-not-query-ex-request]]
==== Example request

The following search returns documents matching `hoya`, excluding matches
for `la hoya`.

[source,js]
----
GET /_search
{
    "query": {
        "span_not" : {
            "include" : {
                "span_term" : { "message" : { "value" : "hoya" } }
            },
            "exclude" : {
                "span_near" : { 
                    "clauses" : [
                        { "span_term" : { "message" : { "value" : "la" } } } ,
                        { "span_term" : { "message" : { "value" : "hoya" } } }
                    ],
                    "in_order" : true,
                    "slop" : 0
                }
            }
        }
    }
}
----
// CONSOLE


[[span-not-top-level-params]]
==== Top-level parameters for `span_not`
`include`::
(Required, query object) Contains a <<span-queries,span query>>. Returned
documents must match this query.

`exclude`::
+
--
(Required, query object) Contains a <<span-queries,span query>> used to remove
matching documents from the `include` query.
--

`pre`::
+
--
(Optional, integer) Number of tokens **before** `include` query matches that can’t
overlap with `exclude` query matches. Defaults to `0`.

You cannot use the `pre` parameter with the `dist` parameter.
--

`post`::
+
--
(Optional, integer) Number of tokens **after** `include` query matches that can’t
overlap with `exclude` query matches. Defaults to `0`.

You cannot use the `post` parameter with the `dist` parameter.
--

`dist`::
+
--
(Optional, integer) Number of tokens **before and after** `include` query matches
that can’t overlap with `exclude` query matches.

You cannot use the `dist` parameter with the `pre` or `post` parameters.
--