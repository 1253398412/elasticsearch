[[query-dsl-span-within-query]]
=== Span within query
++++
<titleabbrev>Span within</titleabbrev>
++++

Returns spans from a `little` <<span-queries,span query>> that are enclosed in
spans matching a `big` span query.


[[span-within-query-ex-request]]
==== Example request

[source,js]
----
GET /_search
{
    "query": {
        "span_within" : {
            "big" : {
                "span_near" : { 
                    "clauses" : [
                        { "span_term" : { "message" : { "value" : "bar" } } },
                        { "span_term" : { "message" : { "value" : "baz" } } }
                    ],
                    "slop" : 5,
                    "in_order" : true
                }
            },
            "little" : {
                "span_term" : { "message" : { "value" : "foo" } } 
            }
        }
    }
}
----
// CONSOLE


[[span-within-top-level-params]]
==== Top-level parameters for `span_within`

`big`::
(Required, query object) Contains a <<span-queries,span query>>. To be returned,
spans matching the `little` span query must be enclosed in spans matching this
query.

`little`::
(Required, query object) Contains a <<span-queries,span query>>. To be returned,
spans matching this span query must be enclosed in spans matching the `big`
query.
